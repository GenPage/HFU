###########################
# French Events
###########################

add_namespace = france

# Japan demands Indochina
country_event = {
	id = france.1
	title = france.1.t
	desc = france.1.d
	picture = GFX_report_event_japan_army_mountainside
	
	is_triggered_only = yes
	
	option = { # Accept demands
		name = france.1.a
		ai_chance = {
			factor = 25 
			modifier = {
				factor = 50
				has_war = yes
				any_enemy_country = {
					strength_ratio = { 
						tag = ROOT 
						ratio < 0.4
					}
				}
			}
			modifier = {
				factor = 75
				16 = { NOT = { is_controlled_by = FRA } } #Paris	
			}
		} 
		JAP = {
			country_event = { days = 5 id = japan.6 }
		}
	}
}

### The Fall of France

# The Battle is Lost
country_event = {
	id = france.10
	title = france.10.t
	desc = france.10.d
	picture = GFX_report_event_german_parade_paris
	
	fire_only_once = yes
	
	trigger = {
		tag = FRA
		has_war_with = GER
		16 = { is_controlled_by = GER }
		is_in_faction_with = ENG
		ENG = { has_war_with = GER }
		surrender_progress > 0.7
		GER = {
			OR = {
				is_faction_leader = yes
				has_government = neutrality
			}
		}
		has_civil_war = no
		
		#Don't fire if France has pushed pretty far into ITA or GER
		NOT = {
			any_state = {
				is_on_continent = europe
				NOT = { state = 158 }
				NOT = { state = 114 }
				NOT = { state = 50 }
				NOT = { state = 42 }
				is_controlled_by = ROOT
				OR = {
					is_owned_by = GER
					AND = {
						FRA = { has_War_with = ITA }
						is_owned_by = ITA
					}
				}
			}
		}		

		#Don't fire if any states in France are controlled by a different human player
		NOT = {
			any_enemy_country = {
				is_ai = no
				NOT = { tag = GER }
				NOT = { is_in_faction_with = GER }
				ROOT = {
					any_owned_state = {
						is_on_continent = europe
						NOT = { state = 1 }
						NOT = { state = 735 }
						NOT = { state = 21 }
						NOT = { state = 31 }
						is_controlled_by = PREV.PREV
					}
				}
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		set_global_flag = achievement_france_surrender
	}
	
	
	option = { # Become Free French
		name = france.10.b
		ai_chance = {
			factor = 100
		}
		set_global_flag = fall_of_france
		GER = { country_event = france.14 }
		custom_effect_tooltip = france.10.b_tt
	}
	
}

# France wants Armistice (Germany)
country_event = {
	id = france.14
	title = france.14.t
	desc = france.14.d
	picture = GFX_report_event_german_parade_paris
	
	is_triggered_only = yes
	

	option = { # Conquer everything!
		name = france.14.b
		ai_chance = { 
			factor = 100 
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
		}
		FRA = {
			country_event = { hours = 6 id = france.15 }
		}
	}
}

# Germany refuses armistice! (France)
country_event = {
	id = france.15
	title = france.15.t
	desc = france.15.d
	picture = GFX_report_event_french_resistance_01
	
	is_triggered_only = yes
	
	option = {
		name = france.15.a
	}
}

#Capital captured by non french faction
country_event = {
	id = france.16
	title = france.16.t
	desc = france.16.d
	picture = GFX_report_event_french_resistance_02

	fire_only_once = yes

	trigger = {
		original_tag = FRA
		16 = { controller = { NOT = { original_tag = FRA } } }
		has_capitulated = yes
		#16 = { is_owned_by = FRA }
	}
	
	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = france.16.a
		remove_ideas = FRA_victors_of_wwi
		remove_ideas = FRA_disjointed_government
		remove_ideas = FRA_protected_by_the_maginot_line
				set_country_flag = casablanca_capital

			if = {
			limit = { 461 = { is_owned_by = FRA }
			}
			set_capital = 461 
		}
	}
}

# French strikes
country_event = {
	id = france.21
	title = france.21.t
	desc = france.21.d
	picture = GFX_report_event_worker_protests
	
	trigger = {
		NOT = { has_government = communism }
		tag = FRA
		date > 1936.4.1
		date < 1938.1.1
	}

	fire_only_once = yes
	
	mean_time_to_happen = {	days = 60	}

	option = {
		ai_chance = {
			base = 15
		}
		name = france.21.a
		add_timed_idea = {
			idea = FRA_factory_strikes
			days = 90
		}
		set_country_flag = france.21.a_chosen
	}
	option = {
		ai_chance = {
			base = 85
		}
		name = france.21.b
		add_timed_idea = {
			idea = FRA_matignon_agreements
			days = 365
		}
		add_popularity = {
			ideology = communism
			popularity = 0.06
		}		
	}
}
# Revoke Worker rights
country_event = {
	id = france.22
	title = france.22.t
	desc = france.22.d
	picture = GFX_report_event_airplane_factory
	
	trigger = {
		NOT = { has_government = communism }
		has_idea = FRA_matignon_agreements
		date > 1936.7.1
	}

	fire_only_once = yes

	mean_time_to_happen = {	days = 90	}
	option = {
		ai_chance = {
			factor = 2
		}
		add_stability = 0.05
		name = france.22.a
	}
	option = {
		name = france.22.b
		ai_chance = { 
			factor = 10
			modifier = {
				factor = 0
				communism > 0.4
			}
		}
		remove_ideas =  FRA_matignon_agreements
		add_popularity = {
			ideology = communism
			popularity = 0.04
		}
	}	
}
# Strikes are over
country_event = {
	id = france.23
	title = france.23.t
	desc = france.23.d
	picture = GFX_report_event_airplane_factory


	trigger = {
		NOT = { has_idea = FRA_factory_strikes }
		has_country_flag = france.21.a_chosen
	}

	fire_only_once = yes
	
	mean_time_to_happen = {	days = 2	}

	option = {
		name = france.23.a
	}
}

# Édouard Daladier Resigns
country_event = {
    id = france.31
    title = france.31.t
    desc = france.31.d
    picture = GFX_report_event_german_parade_paris
 
    fire_only_once = yes
 
    trigger = {
        original_tag = FRA
        has_government = democratic
        has_global_flag = fall_of_france
        NOT = { has_country_flag = france_de_gaulle }
    } 

    mean_time_to_happen = {
        days = 7
    }

    option = {
        name = france.31.a
        retire_country_leader = yes
        create_country_leader = {
        	name = "Paul Reynaud"
        	desc = "POLITICS_PAUL_REYNAUD_DESC"
        	picture = "Portrait_France_Paul_Reynaud.dds"
        	expire = "1965.1.1"
        	ideology = liberalism
        	traits = {
        	      }
            }
        set_country_flag = daladier_resigned
      }
}

news_event = {
	id = france.34
	title = france.34.title
	desc = france.34.desc
	
	picture = GFX_news_event_degaulle_churchill
	
	is_triggered_only = yes
	
	option = {
		name = france.34.a
		trigger = {
			OR = {
				tag = ENG
				tag = FRA
				is_in_faction_with = ENG
				is_subject_of = ENG
			}
		}
	}
	
	option = {
		name = france.34.b
		trigger = {
			NOT = {
				OR = {
					tag = ENG
					tag = FRA
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}
	}
}

country_event = {
	id = france.351
	title = france.351.t
	desc = france.351.d
	picture = GFX_france1
	
	trigger = {
		original_tag = FRA
		has_government = democratic
	   	has_capitulated = yes
		NOT = { controls_state = 461 
				has_country_flag = gabon_capital
									}
	}

	fire_only_once = yes

	mean_time_to_happen = {
		days = 1
	}


	
	option = {
		ai_chance = { factor = 1 }
		name = france.351.a
		set_capital = 539	
		set_country_flag = gabon_capital}	
	}



country_event = {
	id = france.352
	title = france.352.t
	desc = france.352.d
	picture = GFX_france3
	
	trigger = {
		original_tag = FRA
		has_government = democratic
	   	has_capitulated = yes
		NOT = { controls_state = 461 
				controls_state = 539
				has_country_flag = madagascar_capital}
	}

	fire_only_once = yes

	mean_time_to_happen = {
		days = 1
	}

	
	
	option = {
		ai_chance = { factor = 1 }
		name = france.352.a
		set_capital = 543
		set_country_flag = madagascar_capital	
		
		
						retire_country_leader = yes	
				create_country_leader = {
					name = "Francois Darlan"
					desc = "POLITICS_DARLAN_DESC"
					picture = "Portrait_France_Francois_Darlan.dds"
					expire = "1965.1.1"
					ideology = conservatism
					traits = {
						
					}
					
				}
		
		
		}
	}

country_event = {	
	id = france.353
	title = france.353.t
	desc = france.353.d
	picture = GFX_france4
	
	trigger = {
		original_tag = FRA
		has_government = democratic
	   	has_capitulated = yes
		NOT = { controls_state = 461 
				controls_state = 539
				controls_state = 543
				has_country_flag = caledonia_capital
				}
		}

	fire_only_once = yes

	mean_time_to_happen = {
		days = 1
	}

	
	
	option = {
		ai_chance = { factor = 1 }
		name = france.353.a
		set_capital = 635
		set_country_flag = caledonia_capital
		}	
	}




country_event = {
	id = france.36
	title = election.3.t
	desc = election.3.d
	picture = GFX_report_event_tank_factory
	
	is_triggered_only = yes
	
	trigger = {
		tag = FRA
	 	date > 1936.1.15 
	}

	mean_time_to_happen = {
		days = 1	
	}

	option = {
		name = election.3.a
		if = {
			limit = { has_idea = low_economic_mobilisation }
			add_ideas = partial_economic_mobilisation
		}
		if = {
			limit = { has_idea = civilian_economy }
			add_ideas = low_economic_mobilisation
		}
		if = {
			limit = { has_idea = isolation }
			add_ideas = civilian_economy
		}
		if = {
			limit = { has_idea = undisturbed_isolation }
			add_ideas = isolation
		}
		if = {
			limit = { has_idea = volunteer_only }
			add_ideas = limited_conscription
		}
		if = {
			limit = { has_idea = disarmed_nation }
			add_ideas = volunteer_only
		}
		add_war_support = 0.05
	}
}

country_event = {
   id = france.144
   title = france.144.t
   desc = france.144.d
   picture = GFX_report_event_fra_por_colony
   fire_only_once = yes
   is_triggered_only = yes

   option = {
   name = france.144.a
   transfer_state = 296
   296 = {
   add_extra_state_shared_building_slots = 1
   }
   transfer_state = 540
   540 = {
   add_extra_state_shared_building_slots = 1
   }
   
    transfer_state = 544
     544 = {
   add_extra_state_shared_building_slots = 1
   }
   
   transfer_state = 702
   transfer_state = 321
   
   if = {
   limit = { POR = { has_full_control_of_state = 721 }}
   transfer_state = 721
   }
   
   }
   
      option = {
   name = france.144.b
      296 = {
   add_extra_state_shared_building_slots = 1
   }
   transfer_state = 540
   540 = {
   add_extra_state_shared_building_slots = 1
   }
   
    transfer_state = 544
     544 = {
   add_extra_state_shared_building_slots = 1
   }
   
   ENG = {
    country_event = france.149
   }  
   }
   
      option = {
   name = france.144.c
   transfer_state = 296
         296 = {
   add_extra_state_shared_building_slots = 1
   }
   transfer_state = 540
   540 = {
   add_extra_state_shared_building_slots = 1
   }
   
   SAF = {
     country_event = france.147
	}
    ENG = {
	country_event = france.148
   }
   
   RAJ = {
	country_event = france.146
   }
   
    INS = { 
	  if = {
   limit = { POR = { has_full_control_of_state = 721 }}
   transfer_state = 721
   }
   } 
   }  
}


country_event = {
   id = france.145
   title = france.145.t
   desc = france.145.d
   picture = GFX_report_event_france_startup
   fire_only_once = yes
is_triggered_only = yes
   option = {
   name = france.145.a
   }
}


country_event = {
   id = france.146
   title = france.146.t
   desc = france.146.d
   picture = GFX_report_event_fra_por_colony
   fire_only_once = yes
   is_triggered_only = yes

   option = {
   name = france.146.a
      RAJ = {
   transfer_state = 321
   321 = { add_extra_state_shared_building_slots = 1 }
   }
   }
   }
   
   country_event = {
   id = france.147
   title = france.147.t
   desc = france.147.d
   picture = GFX_report_event_fra_por_colony
   fire_only_once = yes
   is_triggered_only = yes

   option = {
   name = france.147.a
      SAF = {
   transfer_state = 544
   321 = { add_extra_state_shared_building_slots = 1 }
   }
   }
   }

   country_event = {
   id = france.148
   title = france.148.t
   desc = france.148.d
   picture = GFX_report_event_fra_por_colony
   fire_only_once = yes
   is_triggered_only = yes

   option = {
   name = france.148.a
      ENG = {
   transfer_state = 702
   }
   }
   }
   
   
   country_event = {
   id = france.149
   title = france.149.t
   desc = france.149.d
   picture = GFX_report_event_fra_por_colony
   fire_only_once = yes
   is_triggered_only = yes

   option = {
   name = france.149.a
      ENG = {
   transfer_state = 702
   transfer_state = 321
   }
   
       INS = { 
	  if = {
   limit = { POR = { has_full_control_of_state = 721 }}
   transfer_state = 721
   }
   } 
   
   }
   }