###########################
# French Events
###########################

add_namespace = france

# Japan demands Indochina
country_event = {
	id = france.1
	title = france.1.t
	desc = france.1.d
	picture = GFX_report_event_japan_army_mountainside
	
	is_triggered_only = yes
	
	option = { # Accept demands
		name = france.1.a
		JAP = {
			country_event = { days = 5 id = japan.6 }
		}
	}
}

### The Fall of France

# The Battle is Lost
country_event = {
	id = france.10
	title = france.10.t
	desc = france.10.d
	picture = GFX_report_event_german_parade_paris

	fire_only_once = yes

	trigger = {
		tag = FRA
		has_war_with = GER
		16 = { is_controlled_by = GER }
		is_in_faction_with = ENG
		ENG = { has_war_with = GER }
		FRA = {has_capitulated = yes}
		GER = {
			is_faction_leader = yes
		}
		NOT = {
			has_civil_war = yes
		}
	}

	mean_time_to_happen = {
		days = 2
	}

	immediate = {
		set_global_flag = achievement_france_surrender
		set_global_flag = fall_of_france
		GER = { country_event = france.14 }
	}


	option = { # Become Free French
		name = france.10.b
		ai_chance = {
			factor = 85
		}
		custom_effect_tooltip = france.10.b_tt
	}
}



# France wants Armistice (Germany)
country_event = {
	id = france.14
	title = france.14.t
	desc = france.14.d
	picture = GFX_report_event_german_parade_paris

	is_triggered_only = yes

	option = { # Agree
		name = france.14.a

				
				set_global_flag = achievement_france_surrender
				set_global_flag = fall_of_france
				
				          

				
				FRA = { news_event = { id = france.20 days = 1 } }
				
				FRA = {
					start_civil_war = {
						ideology = fascism
						size = 0.9
						capital = 26
						states = { 26 }
					
					}
					set_cosmetic_tag = FRA_FREE
			
					create_corps_commander = {
						name = "Charles De Gaulle"
						picture = "Portrait_France_Charles_De_Gaulle.dds"
						traits = { armor_officer harsh_leader media_personality trait_reckless panzer_leader exiled_leader }
						skill = 6
						attack_skill = 5
						defense_skill = 6
						planning_skill = 3
						logistics_skill = 4
					}
					create_field_marshal = {
						name = "Philippe Leclerc"
						picture = "portrait_france_philippe_leclerc.dds"
						traits = { armor_officer trait_reckless career_officer politically_connected panzer_leader skilled_staffer organizer exiled_leader }
						skill = 5
						attack_skill = 4
						defense_skill = 3
						planning_skill = 3
						logistics_skill = 6
					}
					create_corps_commander = {
						name = "Marie-Pierre Koenig"
						picture = "Portrait_France_Marie_Pierre_Koenig.dds"
						traits = { trickster trait_mountaineer infantry_leader infantry_officer career_officer harsh_leader exiled_leader }
						skill = 5
						attack_skill = 5
						defense_skill = 3
						planning_skill = 4
						logistics_skill = 4
					}
					create_corps_commander = {
						name = "Edgard de Larminat"
						picture = "Portrait_France_Generic_land_4.dds"
						traits = { desert_fox war_hero politically_connected trait_reckless cavalry_leader armor_officer exiled_leader }
						skill = 4
						attack_skill = 5
						defense_skill = 3
						planning_skill = 1
						logistics_skill = 4
					}
					create_navy_leader = {
						name = "Émile Muselier"
						picture = "Portrait_France_Emile_Muselier.dds"
						traits = { spotter }
						skill = 3
						attack_skill = 3
						defense_skill = 3
						maneuvering_skill = 3
						coordination_skill = 3
					}
					set_country_flag = free_france
					set_capital = 539
				
				}
				
				ITA = { transfer_state = 735}
			    
				EFR = {
					transfer_state = 26
					transfer_state = 22
					transfer_state = 31
					transfer_state = 25
					transfer_state = 20
					transfer_state = 33
					transfer_state = 32
					transfer_state = 21
					#Northern Africa
					transfer_state = 513
					transfer_state = 458
					transfer_state = 459
					transfer_state = 460
					transfer_state = 461
					transfer_state = 462
					transfer_state = 665
					transfer_state = 514
					set_capital = 26
					add_ideas = EFR_neutrality_idea
					diplomatic_relation = { country = ENG relation = non_aggression_pact }
					diplomatic_relation = { country = USA relation = non_aggression_pact }
					diplomatic_relation = { country = PHI relation = non_aggression_pact }
					diplomatic_relation = { country = FRA relation = non_aggression_pact }
					diplomatic_relation = { country = SAF relation = non_aggression_pact }
					diplomatic_relation = { country = CAN relation = non_aggression_pact }
					diplomatic_relation = { country = RAJ relation = non_aggression_pact }
					diplomatic_relation = { country = AST relation = non_aggression_pact }
					diplomatic_relation = { country = NZL relation = non_aggression_pact }
					diplomatic_relation = { country = BRA relation = non_aggression_pact }
					diplomatic_relation = { country = GER relation = non_aggression_pact }
					every_state = {
						limit = {
							is_core_of = FRA
							is_controlled_by = EFR
						}
						add_core_of = EFR
					}
					every_state = {
						limit = {
							NOT = {
								is_core_of = FRA
							}
							is_controlled_by = EFR
						}
						add_claim_by  = FRA
					}
					28 = {
						remove_core_of = EFR
					}
				
					set_capital = 26
					set_politics = {
						ruling_party = fascism
						elections_allowed = no                }

                    set_popularities = {
                        democratic = 18
                        fascism = 70
                        communism = 2
                        neutrality = 10
                    }
				FRA = {
					transfer_navy = { 
						target = EFR 
					}
				}
				destroy_ships = {
                    type = ship_hull_light
                    count = all
                }
                destroy_ships = {
                    type = ship_hull_cruiser
                    count = all
                }
                destroy_ships = {
                    type = ship_hull_heavy
                    count = all
                }
                destroy_ships = {
                    type = ship_hull_carrier 
                    count = all
                }
                destroy_ships = {
                    type = ship_hull_submarine
                    count = all
                }
			}
		}
	}


#Capital captured by non french faction
country_event = {
	id = france.16
	title = france.16.t
	desc = france.16.d
	picture = GFX_report_event_french_resistance_02

	fire_only_once = yes

	trigger = {
		original_tag = FRA
		16 = { controller = { NOT = { original_tag = FRA } } }
		has_capitulated = yes
		#16 = { is_owned_by = FRA }
	}
	
	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = france.16.a
		remove_ideas = FRA_victors_of_wwi
		remove_ideas = FRA_disjointed_government
		remove_ideas = FRA_protected_by_the_maginot_line
				set_country_flag = casablanca_capital

			if = {
			limit = { 461 = { is_owned_by = FRA }
			}
			set_capital = 461 
		}
	}
}

# French strikes
country_event = {
	id = france.21
	title = france.21.t
	desc = france.21.d
	picture = GFX_report_event_worker_protests
	
	trigger = {
		NOT = { has_government = communism }
		tag = FRA
		date > 1936.4.1
		date < 1938.1.1
	}

	fire_only_once = yes
	
	mean_time_to_happen = {	days = 60	}

	option = {
		ai_chance = {
			base = 15
		}
		name = france.21.a
		add_timed_idea = {
			idea = FRA_factory_strikes
			days = 90
		}
		set_country_flag = france.21.a_chosen
	}
	option = {
		ai_chance = {
			base = 85
		}
		name = france.21.b
		add_timed_idea = {
			idea = FRA_matignon_agreements
			days = 365
		}
		add_popularity = {
			ideology = communism
			popularity = 0.06
		}		
	}
}
# Revoke Worker rights
country_event = {
	id = france.22
	title = france.22.t
	desc = france.22.d
	picture = GFX_report_event_airplane_factory
	
	trigger = {
		NOT = { has_government = communism }
		has_idea = FRA_matignon_agreements
		date > 1936.7.1
	}

	fire_only_once = yes

	mean_time_to_happen = {	days = 90	}
	option = {
		ai_chance = {
			factor = 2
		}
		add_stability = 0.05
		name = france.22.a
	}
	option = {
		name = france.22.b
		ai_chance = { 
			factor = 10
			modifier = {
				factor = 0
				communism > 0.4
			}
		}
		remove_ideas =  FRA_matignon_agreements
		add_popularity = {
			ideology = communism
			popularity = 0.04
		}
	}	
}
# Strikes are over
country_event = {
	id = france.23
	title = france.23.t
	desc = france.23.d
	picture = GFX_report_event_airplane_factory


	trigger = {
		NOT = { has_idea = FRA_factory_strikes }
		has_country_flag = france.21.a_chosen
	}

	fire_only_once = yes
	
	mean_time_to_happen = {	days = 2	}

	option = {
		name = france.23.a
	}
}

# Édouard Daladier Resigns
country_event = {
    id = france.31
    title = france.31.t
    desc = france.31.d
    picture = GFX_report_event_german_parade_paris
 
    fire_only_once = yes
 
    trigger = {
        original_tag = FRA
        has_government = democratic
        has_global_flag = fall_of_france
        NOT = { has_country_flag = france_de_gaulle }
    } 

    mean_time_to_happen = {
        days = 7
    }

    option = {
        name = france.31.a
        retire_country_leader = yes
        create_country_leader = {
        	name = "Paul Reynaud"
        	desc = "POLITICS_PAUL_REYNAUD_DESC"
        	picture = "Portrait_France_Paul_Reynaud.dds"
        	expire = "1965.1.1"
        	ideology = liberalism
        	traits = {
        	      }
            }
        set_country_flag = daladier_resigned
      }
}

news_event = {
	id = france.34
	title = france.34.title
	desc = france.34.desc
	
	picture = GFX_news_event_degaulle_churchill
	
	is_triggered_only = yes
	
	option = {
		name = france.34.a
		trigger = {
			OR = {
				tag = ENG
				tag = FRA
				is_in_faction_with = ENG
				is_subject_of = ENG
			}
		}
	}
	
	option = {
		name = france.34.b
		trigger = {
			NOT = {
				OR = {
					tag = ENG
					tag = FRA
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}
	}
}

country_event = {
	id = france.351
	title = france.351.t
	desc = france.351.d
	picture = GFX_france1
	
	trigger = {
		original_tag = FRA
		has_government = democratic
	   	has_capitulated = yes
		NOT = { controls_state = 461 
				has_country_flag = gabon_capital
									}
	}

	fire_only_once = yes

	mean_time_to_happen = {
		days = 1
	}


	
	option = {
		ai_chance = { factor = 1 }
		name = france.351.a
		set_capital = 539	
		set_country_flag = gabon_capital}	
	}



country_event = {
	id = france.352
	title = france.352.t
	desc = france.352.d
	picture = GFX_france3
	
	trigger = {
		original_tag = FRA
		has_government = democratic
	   	has_capitulated = yes
		NOT = { controls_state = 461 
				controls_state = 539
				has_country_flag = madagascar_capital}
	}

	fire_only_once = yes

	mean_time_to_happen = {
		days = 1
	}

	
	
	option = {
		ai_chance = { factor = 1 }
		name = france.352.a
		set_capital = 543
		set_country_flag = madagascar_capital	
		
		
						retire_country_leader = yes	
				create_country_leader = {
					name = "Francois Darlan"
					desc = "POLITICS_DARLAN_DESC"
					picture = "Portrait_France_Francois_Darlan.dds"
					expire = "1965.1.1"
					ideology = conservatism
					traits = {
						
					}
					
				}
		
		
		}
	}

country_event = {	
	id = france.353
	title = france.353.t
	desc = france.353.d
	picture = GFX_france4
	
	trigger = {
		original_tag = FRA
		has_government = democratic
	   	has_capitulated = yes
		NOT = { controls_state = 461 
				controls_state = 539
				controls_state = 543
				has_country_flag = caledonia_capital
				}
		}

	fire_only_once = yes

	mean_time_to_happen = {
		days = 1
	}

	
	
	option = {
		ai_chance = { factor = 1 }
		name = france.353.a
		set_capital = 635
		set_country_flag = caledonia_capital
		}	
	}




country_event = {
	id = france.36
	title = election.3.t
	desc = election.3.d
	picture = GFX_report_event_tank_factory
	
	is_triggered_only = yes
	
	trigger = {
		tag = FRA
	 	date > 1936.1.15 
	}

	mean_time_to_happen = {
		days = 1	
	}

	option = {
		name = election.3.a
		if = {
			limit = { has_idea = low_economic_mobilisation }
			add_ideas = partial_economic_mobilisation
		}
		if = {
			limit = { has_idea = civilian_economy }
			add_ideas = low_economic_mobilisation
		}
		if = {
			limit = { has_idea = isolation }
			add_ideas = civilian_economy
		}
		if = {
			limit = { has_idea = undisturbed_isolation }
			add_ideas = isolation
		}
		if = {
			limit = { has_idea = volunteer_only }
			add_ideas = limited_conscription
		}
		if = {
			limit = { has_idea = disarmed_nation }
			add_ideas = volunteer_only
		}
		add_war_support = 0.05
	}
}

country_event = {
   id = france.144
   title = france.144.t
   desc = france.144.d
   picture = GFX_report_event_fra_por_colony
   fire_only_once = yes
   is_triggered_only = yes

   option = {
   name = france.144.a
   transfer_state = 296
   296 = {
   add_extra_state_shared_building_slots = 1
   }
   transfer_state = 540
   540 = {
   add_extra_state_shared_building_slots = 1
   }
   
    transfer_state = 544
     544 = {
   add_extra_state_shared_building_slots = 1
   }
   
   transfer_state = 702
   transfer_state = 321
   
   if = {
   limit = { POR = { has_full_control_of_state = 721 }}
   transfer_state = 721
   }
   
   }
   
      option = {
   name = france.144.b
      296 = {
   add_extra_state_shared_building_slots = 1
   }
   transfer_state = 540
   540 = {
   add_extra_state_shared_building_slots = 1
   }
   
    transfer_state = 544
     544 = {
   add_extra_state_shared_building_slots = 1
   }
   
   ENG = {
    country_event = france.149
   }  
   }
   
      option = {
   name = france.144.c
   transfer_state = 296
         296 = {
   add_extra_state_shared_building_slots = 1
   }
   transfer_state = 540
   540 = {
   add_extra_state_shared_building_slots = 1
   }
   
   SAF = {
     country_event = france.147
	}
    ENG = {
	country_event = france.148
   }
   
   RAJ = {
	country_event = france.146
   }
   
    INS = { 
	  if = {
   limit = { POR = { has_full_control_of_state = 721 }}
   transfer_state = 721
   }
   } 
   }  
}


country_event = {
   id = france.145
   title = france.145.t
   desc = france.145.d
   picture = GFX_report_event_france_startup
   fire_only_once = yes
is_triggered_only = yes
   option = {
   name = france.145.a
   }
}


country_event = {
   id = france.146
   title = france.146.t
   desc = france.146.d
   picture = GFX_report_event_fra_por_colony
   fire_only_once = yes
   is_triggered_only = yes

   option = {
   name = france.146.a
      RAJ = {
   transfer_state = 321
   321 = { add_extra_state_shared_building_slots = 1 }
   }
   }
   }
   
   country_event = {
   id = france.147
   title = france.147.t
   desc = france.147.d
   picture = GFX_report_event_fra_por_colony
   fire_only_once = yes
   is_triggered_only = yes

   option = {
   name = france.147.a
      SAF = {
   transfer_state = 544
   321 = { add_extra_state_shared_building_slots = 1 }
   }
   }
   }

   country_event = {
   id = france.148
   title = france.148.t
   desc = france.148.d
   picture = GFX_report_event_fra_por_colony
   fire_only_once = yes
   is_triggered_only = yes

   option = {
   name = france.148.a
      ENG = {
   transfer_state = 702
   }
   }
   }
   
   
   country_event = {
   id = france.149
   title = france.149.t
   desc = france.149.d
   picture = GFX_report_event_fra_por_colony
   fire_only_once = yes
   is_triggered_only = yes

   option = {
   name = france.149.a
      ENG = {
   transfer_state = 702
   transfer_state = 321
   }
   
       INS = { 
	  if = {
   limit = { POR = { has_full_control_of_state = 721 }}
   transfer_state = 721
   }
   } 
   
   }
   }