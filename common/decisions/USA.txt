USA_puppet_minor = {

USA_puppet_brazil = {

	allowed = {
		original_tag = USA
	}

	available = {
	BRA = { has_war_with = GER
			is_ai = yes 
			}
	date > 1941.1.1

	}
	
	visible = {
	}
	
	fire_only_once = yes
	
	cost = 0
	
		complete_effect = {
			USA = { 
				set_autonomy = {
					target = BRA
					autonomy_state = autonomy_colony
				}
			}	
	}
	
}

USA_puppet_mexico = {

	allowed = {
		original_tag = USA
	}
	
	available = {
	MEX = { has_war_with = GER
			is_ai = yes 
			}
		date > 1941.1.1
	}
	
		visible = {
	}
	
	fire_only_once = yes
	
	cost = 0
	
	complete_effect = {
			USA = { 
				set_autonomy = {
					target = MEX
					autonomy_state = autonomy_colony
				}
			}	
	}
	
}

}

war_measures = {

	USA_homeland_defense = {

		icon = generic_prepare_civil_war

		allowed = {
			original_tag = USA
		}

		available = {
			has_civil_war = no
			any_of = {
				array = USA.core_states
				var:v = { NOT = { is_controlled_by = USA } }
			}
		}

		cost = 50
		fire_only_once = yes
		ai_will_do = {
			factor = 200
		}

		visible = {
			has_defensive_war = yes
			CSA = {
				exists = no
			}
		}

		complete_effect = {
			if = {
				limit = {
					has_war_support < 0.9
				}
				set_war_support = 0.9
			}
			if = {
				limit = {
					has_idea = great_depression
				}
				remove_ideas = great_depression
			}
			if = {
				limit = {
					NOT = {
						OR = {
							has_idea = extensive_conscription
							has_idea = scraping_the_barrel
							has_idea = service_by_requirement
							has_idea = all_adults_serve
						}
					}
				}
				add_ideas = extensive_conscription
			}
			if = {
				limit = {
					OR = {
						has_idea = undisturbed_isolation
						has_idea = isolation
						has_idea = civilian_economy
						has_idea = low_economic_mobilisation
					}
				}
				add_ideas = war_economy
			}
			add_ideas = USA_homeland_defense
		}
	}

}
USA_aid_britain = {
	USA_establish_personal_communication_with_former_naval_person = {

		icon = generic_political_discourse

		allowed = {
			original_tag = USA
		}

		available = {
			has_country_leader = { ruling_only = yes name = "Franklin Delano Roosevelt" }
			has_country_flag = blood_toil_tears_sweat_speech
			ENG = { has_defensive_war = yes }
		}

		cost = 50
		fire_only_once = yes
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 10
				has_opinion = { target = ENG value > 60 }
			}
			modifier = {
				factor = 10
				has_opinion = { target = ENG value > 99 }
			}
		}

		visible = {
			has_war = no
		}

		complete_effect = {
			add_war_support = 0.05
			add_opinion_modifier = { target = ENG modifier = USA_special_relationship }
			reverse_add_opinion_modifier = { target = ENG modifier = USA_special_relationship }
		}
	}

	USA_battle_domestic_isolationism = {

		icon = generic_civil_support

		allowed = {
			original_tag = USA
		}

		available = {
			has_country_leader = { ruling_only = yes name = "Franklin Delano Roosevelt" }
			has_country_flag = fight_on_the_beaches_speech
			ENG = { has_defensive_war = yes }
		}

		cost = 50
		fire_only_once = yes
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 10
				has_opinion = { target = ENG value > 60 }
			}
			modifier = {
				factor = 10
				has_opinion = { target = ENG value > 99 }
			}
		}

		modifier = {
			war_support_weekly = 0.002		
		}

		days_remove = 180

		visible = {
			has_war = no
		}

		complete_effect = {
			add_war_support = 0.05
		}
	}

	USA_emergency_arms_deliveries = {

		icon = generic_prepare_civil_war

		allowed = {
			original_tag = USA
		}

		available = {
			has_country_leader = { ruling_only = yes name = "Franklin Delano Roosevelt" }
			has_country_flag = this_was_their_finest_hour_speech
			ENG = { has_defensive_war = yes }
		}

		cost = 50
		fire_only_once = yes
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 10
				has_opinion = { target = ENG value > 60 }
			}
			modifier = {
				factor = 10
				has_opinion = { target = ENG value > 99 }
			}
		}

		modifier = {
			war_support_weekly = 0.005		
		}

		days_remove = 30

		visible = {
			has_war = no
		}

		complete_effect = {
			ENG = {
				add_equipment_to_stockpile = { type = infantry_equipment_0 amount = 20000 producer = USA }
				add_equipment_to_stockpile = { type = artillery_equipment_1 amount = 300 producer = USA }
				add_equipment_to_stockpile = { type = support_equipment_1 amount = 300 producer = USA }
				country_event = { id = wtt_britain.30 }
			}
		}
	}

}

foreign_support = {
	USA_support_the_anti_fascist_war = {

		icon = generic_industry

		allowed = {
			original_tag = USA
		}

		available = {
			NOT = {
				has_global_flag = USA_support_the_anti_fascist_war_flag
			}
			FROM = {
				has_completed_focus = CHI_mission_to_the_us
				has_war_with = JAP
			}
		}

		targets = { CHI PRC GXC YUN SHX XSM SIK D01 D02 D03 D04 D05 D06 D07 D08 D09 D10 D11 D12 D13 D14 D15 }

		target_root_trigger = {
		has_completed_focus = USA_limited_intervention
		}

		visible = {
			has_government = democratic
			OR = {
				has_completed_focus = USA_limited_intervention
			}
			FROM = {
				has_completed_focus = CHI_mission_to_the_us
				has_war_with = JAP
			}
		}

		cost = 25
		ai_will_do = {
			factor = 50
			modifier = {
				factor = 3
				any_other_country = {
					has_completed_focus = CHI_mission_to_the_us
					has_idea = CHI_soong_mei_ling
					surrender_progress > 0.2
					has_defensive_war = yes
				}
			}

			modifier = {
				factor = 0.5
				has_war_support > 0.6
			}

			modifier = {
				factor = 2
				has_war_with = JAP
			}
		}

		fire_only_once = no

		modifier = {
			civilian_factory_use = 5			
		}

		days_remove = 180

		complete_effect = {
			FROM = {
				add_offsite_building = { type = arms_factory level = 3 }
				set_global_flag = USA_support_the_anti_fascist_war_flag
			}
		}

		remove_effect = {
			add_war_support = 0.05
			FROM = {
				add_offsite_building = { type = arms_factory level = -3 }
				hidden_effect = {
					clr_global_flag = USA_support_the_anti_fascist_war_flag
				}
			}
		}
	}

	USA_guns_for_the_anti_fascist_war = {

		icon = generic_prepare_civil_war

		allowed = {
			original_tag = USA
		}

		available = {
			has_equipment = { infantry_equipment > 999 }
			FROM = {
				has_completed_focus = CHI_mission_to_the_us
				has_idea = CHI_soong_mei_ling
				has_war_with = JAP
			}
		}

		targets = { CHI PRC GXC YUN SHX XSM SIK D01 D02 D03 D04 D05 D06 D07 D08 D09 D10 D11 D12 D13 D14 D15 }

		target_trigger = {
			FROM = {
				has_completed_focus = CHI_mission_to_the_us
				has_idea = CHI_soong_mei_ling
				has_war_with = JAP
			}
		}

		visible = {
			has_government = democratic
			FROM = {
				has_completed_focus = CHI_mission_to_the_us
				has_idea = CHI_soong_mei_ling
				has_war_with = JAP
			}
		}

		cost = 25
		ai_will_do = {
			factor = 25
			modifier = {
				factor = 3
				FROM = {
					has_completed_focus = CHI_mission_to_the_us
					has_idea = CHI_soong_mei_ling
					surrender_progress > 0.2
					has_defensive_war = yes
				}
			}

			modifier = {
				factor = 0.5
				has_war_support < 0.6
			}

			modifier = {
				factor = 2
				has_war_with = JAP
			}
		}

		fire_only_once = no	

		days_re_enable = 180

		complete_effect = {
			ROOT = {
				send_equipment = {
					target = FROM
					type = infantry_equipment
					amount = 1000
					old_prioritised = yes
				}
			}
		}
	}
}




USA_war_plans = {

	USA_execute_war_plan_silver = {
		icon = generic_operation
		available = {
			has_war_with = ITA
		}
		visible = {
			has_completed_focus = USA_war_plan_silver
		}
		ai_will_do = {
			factor = 1
		}
		fire_only_once = yes
		days_remove = 180
		targeted_modifier = {
			tag = ITA
			attack_bonus_against = 0.1
			defense_bonus_against = 0.1
		}
	}

	USA_execute_war_plan_orange = {
		icon = generic_operation
		available = {
			has_war_with = JAP
		}
		visible = {
			has_completed_focus = USA_war_plan_orange
		}
		ai_will_do = {
			factor = 1
		}
		fire_only_once = yes
		days_remove = 180
		modifier = {
			amphibious_invasion = 0.1
			invasion_preparation = -0.25
		}
		targeted_modifier = {
			tag = JAP
			attack_bonus_against = 0.1
			defense_bonus_against = 0.1
		}
		targeted_modifier = {
			tag = MAN
			attack_bonus_against = 0.1
			defense_bonus_against = 0.1
		}
		targeted_modifier = {
			tag = MEN
			attack_bonus_against = 0.1
			defense_bonus_against = 0.1
		}
	}

	USA_execute_war_plan_black = {
		icon = generic_operation
		available = {
			has_war_with = GER
		}
		visible = {
			has_completed_focus = USA_war_plan_black
		}
		ai_will_do = {
			factor = 1
		}
		fire_only_once = yes
		days_remove = 180
		targeted_modifier = {
			tag = GER
			attack_bonus_against = 0.1
			defense_bonus_against = 0.1
		}
	}

}

USA_intervention_mandate = {
	USA_request_mandate_against_FROM = {
		available = {
			has_war_support > 0.4
			if = {
				limit = {
					FROM = {
						has_offensive_war = yes
					}
					congress_low_support_trigger = yes
				}
			}
			else_if = {
				limit = {
					FROM = {
						has_war = yes
					}
				}
				congress_medium_support_trigger = yes
			}
			else = {
				congress_high_support_trigger = yes
			}
			not = { has_war_with = FROM }
		}
		visible = {
			not = { has_wargoal_against = FROM }
		}
		target_trigger = {
			FROM = {
				exists = yes
				not = {
					has_war_with = ROOT
					is_in_faction_with = ROOT
					is_subject_of = ROOT
				}
				has_country_flag = {
					flag = USA_intervention_strikes
					value > 2
				}
			}
		}
		war_with_target_on_remove = yes
		days_remove = 60
		cost = 50
		ai_will_do = {
			factor = 1
			modifier = {
				has_war = yes
				factor = 0
			}
			modifier = {
				OR = {
					GER = { has_completed_focus = GER_danzig_or_war }
					JAP = { has_completed_focus = JAP_intervene_in_china }
				}
				factor = 10
			}
		}
		remove_effect = {
			create_wargoal = {
				type = topple_government
				target = FROM
			}
		}
	}
	USA_prepare_intervention_in_europe_against_FROM = {

		icon = generic_prepare_civil_war

		available = {

		}

		visible = {
			not = {
				has_war_with = FROM
			}
			has_completed_focus = USA_focus_on_europe
		}
		
		target_root_trigger = {
			has_completed_focus = USA_focus_on_europe
		}
		target_array = global.majors

		target_trigger = {
			FROM = {
				is_major = yes
				capital_scope = {
					is_on_continent = europe
				}
				has_added_tension_amount > 10
				not = { has_government = democratic }
			}
		}

		cost = 75
		days_remove = 90
		complete_effect = {
			add_war_support = 0.05
			if = {
				limit = {
					has_war_support < 0.4
				}
				USA_congress_small_opposition = yes
			}
			if = {
				limit = {
					FROM = {
						not = { has_country_flag = USA_intervention_strikes }
					}
				}
				FROM = {
					set_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
			else = {
				FROM = {
					modify_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	USA_prepare_intervention_in_asia_against_FROM = {

		icon = generic_prepare_civil_war

		available = {

		}

		visible = {
			not = {
				has_war_with = FROM
			}
			has_completed_focus = USA_focus_on_asia
		}

		target_root_trigger = {
			has_completed_focus = USA_focus_on_asia
		}
		target_array = global.majors

		target_trigger = {
			FROM = {
				is_major = yes
				capital_scope = {
					is_on_continent = asia
				}
				has_added_tension_amount > 10
				not = { has_government = democratic }
			}
		}
		cost = 75
		days_remove = 90
		complete_effect = {
			add_war_support = 0.05
			if = {
				limit = {
					has_war_support < 0.4
				}
				USA_congress_small_opposition = yes
			}
			if = {
				limit = {
					FROM = {
						not = { has_country_flag = USA_intervention_strikes }
					}
				}
				FROM = {
					set_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
			else = {
				FROM = {
					modify_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	USA_protest_anschluss = {
		icon = eng_propaganda_campaigns
		available = {
			
		}
		visible = {
			has_country_flag = USA_anschluss_window
			has_completed_focus = USA_focus_on_europe
			not = {
				has_war_with = GER
			}
		}
		fire_only_once = yes
		cost = 25
		ai_will_do = {
			factor = 1
			modifier = {
				has_war = yes
				factor = 0
			}
		}
		complete_effect = {
			add_war_support = 0.05
			GER = { country_event = mtg_usa_diplomatic_protest.1 } 
			if = {
				limit = {
					GER = {
						not = { has_country_flag = USA_intervention_strikes }
					}
				}
				GER = {
					set_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
			else = {
				GER = { 
					modify_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
		}
	}
	USA_protest_munich = {
		icon = eng_propaganda_campaigns
		available = {
			
		}
		visible = {
			has_country_flag = USA_munich_window
			has_completed_focus = USA_focus_on_europe
			not = {
				has_war_with = GER
			}
		}
		fire_only_once = yes
		cost = 25
		ai_will_do = {
			factor = 1
			modifier = {
				has_war = yes
				factor = 0
			}
		}
		complete_effect = {
			add_war_support = 0.05
			GER = { country_event = mtg_usa_diplomatic_protest.1 } 
			if = {
				limit = {
					GER = {
						not = { has_country_flag = USA_intervention_strikes }
					}
				}
				GER = {
					set_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
			else = {
				GER = {
					modify_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
		}
	}
	USA_protest_molotov_ribbentrop = {
		icon = eng_propaganda_campaigns
		available = {
			
		}
		visible = {
			has_country_flag = USA_MR_window
			has_completed_focus = USA_focus_on_europe
			not = {
				has_war_with = GER
			}
		}
		fire_only_once = yes
		cost = 25
		ai_will_do = {
			factor = 1
			modifier = {
				has_war = yes
				factor = 0
			}
		}
		complete_effect = {
			add_war_support = 0.05
			GER = { country_event = mtg_usa_diplomatic_protest.1 } 
			if = {
				limit = {
					GER = {
						not = { has_country_flag = USA_intervention_strikes }
					}
				}
				GER = {
					set_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
			else = {
				GER = {
					modify_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
			if = {
				limit = {
					SOV = {
						not = { has_country_flag = USA_intervention_strikes }
					}
				}
				SOV = {
					set_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
			else = {
				SOV = {
					modify_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
		}
	}
	USA_protest_baltic_annexation = {
		icon = eng_propaganda_campaigns
		available = {
			
		}
		visible = {
			has_country_flag = USA_baltic_window
			has_completed_focus = USA_focus_on_europe
			not = {
				has_war_with = SOV
			}
		}
		fire_only_once = yes
		cost = 25
		ai_will_do = {
			factor = 1
			modifier = {
				has_war = yes
				factor = 0
			}
			modifier = {
				GER = {
					has_country_flag = USA_intervention_strikes
				}
				factor = 0
			}
		}
		complete_effect = {
			add_war_support = 0.05
			SOV = { country_event = mtg_usa_diplomatic_protest.1 } 
			if = {
				limit = {
					SOV = {
						not = { has_country_flag = USA_intervention_strikes }
					}
				}
				SOV = {
					set_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
			else = {
				SOV = {
					modify_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
		}
	}
	USA_protest_army_of_aggression = {
		icon = eng_propaganda_campaigns
		available = {
			
		}
		visible = {
			has_country_flag = USA_army_of_aggression_window
			has_completed_focus = USA_focus_on_europe
			not = {
				has_war_with = FRA
			}
		}
		fire_only_once = yes
		cost = 25
		ai_will_do = {
			factor = 1
			modifier = {
				has_war = yes
				factor = 0
			}
			modifier = {
				GER = {
					has_country_flag = USA_intervention_strikes
				}
				factor = 0
			}
		}
		complete_effect = {
			add_war_support = 0.05
			FRA = { country_event = mtg_usa_diplomatic_protest.1 } 
			if = {
				limit = {
					FRA = {
						not = { has_country_flag = USA_intervention_strikes }
					}
				}
				FRA = {
					set_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
			else = {
				FRA = {
					modify_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
		}
	}
	USA_protest_albania = {
		icon = eng_propaganda_campaigns
		available = {
			
		}
		visible = {
			has_country_flag = USA_albania_window
			has_completed_focus = USA_focus_on_europe
			not = {
				has_war_with = ITA
			}
		}
		fire_only_once = yes
		cost = 25
		ai_will_do = {
			factor = 1
			modifier = {
				has_war = yes
				factor = 0
			}
			modifier = {
				GER = {
					has_country_flag = USA_intervention_strikes
				}
				factor = 0
			}
		}
		complete_effect = {
			add_war_support = 0.05
			ITA = { country_event = mtg_usa_diplomatic_protest.1 } 
			if = {
				limit = {
					ITA = {
						not = { has_country_flag = USA_intervention_strikes }
					}
				}
				ITA = {
					set_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
			else = {
				ITA = {
					modify_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
		}
	}
	USA_protest_yugoslavia = {
		icon = eng_propaganda_campaigns
		available = {
			
		}
		visible = {
			has_country_flag = USA_yugoslavia_window
			has_completed_focus = USA_focus_on_europe
			not = {
				has_war_with = ITA
			}
		}
		fire_only_once = yes
		cost = 25
		ai_will_do = {
			factor = 1
			modifier = {
				has_war = yes
				factor = 0
			}
			modifier = {
				GER = {
					has_country_flag = USA_intervention_strikes
				}
				factor = 0
			}
		}
		complete_effect = {
			add_war_support = 0.05
			ITA = { country_event = mtg_usa_diplomatic_protest.1 } 
			if = {
				limit = {
					ITA = {
						not = { has_country_flag = USA_intervention_strikes }
					}
				}
				ITA = {
					set_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
			else = {
				ITA = {
					modify_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
		}
	}
	USA_protest_china = {
		icon = eng_propaganda_campaigns
		available = {
			
		}
		visible = {
			OR = {
				has_country_flag = USA_china_window
				613 = {
					CONTROLLER = {
						OR = {
							original_tag = JAP
							is_subject_of = JAP
						}
					}
				}
			}
			has_completed_focus = USA_focus_on_asia
			not = {
				has_war_with = JAP
			}
		}
		fire_only_once = yes
		cost = 25
		ai_will_do = {
			factor = 1
			modifier = {
				has_war = yes
				factor = 0
			}
		}
		complete_effect = {
			add_war_support = 0.05
			JAP = { country_event = mtg_usa_diplomatic_protest.1 } 
			if = {
				limit = {
					JAP = {
						not = { has_country_flag = USA_intervention_strikes }
					}
				}
				JAP = {
					set_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
			else = {
				JAP = {
					modify_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
		}
	}
	USA_protest_indochina = {
		icon = eng_propaganda_campaigns
		available = {
			
		}
		visible = {
			has_country_flag = USA_indochina_window
			has_completed_focus = USA_focus_on_asia
			not = {
				has_war_with = JAP
			}
		}
		fire_only_once = yes
		cost = 25
		ai_will_do = {
			factor = 1
			modifier = {
				has_war = yes
				factor = 0
			}
		}
		complete_effect = {
			add_war_support = 0.05
			JAP = { country_event = mtg_usa_diplomatic_protest.1 } 
			if = {
				limit = {
					JAP = {
						not = { has_country_flag = USA_intervention_strikes }
					}
				}
				JAP = {
					set_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
			else = {
				JAP = {
					modify_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
		}
	}
	USA_protest_panay = {
		icon = eng_propaganda_campaigns
		available = {
			
		}
		visible = {
			has_country_flag = USA_panay_window
			has_completed_focus = USA_focus_on_asia
			not = {
				has_war_with = JAP
			}
			not = { has_wargoal_against = JAP }
		}
		fire_only_once = yes
		cost = 25
		ai_will_do = {
			factor = 1
			modifier = {
				has_war = yes
				factor = 0
			}
		}
		complete_effect = {
			add_war_support = 0.05
			JAP = { country_event = mtg_usa_diplomatic_protest.1 } 
			if = {
				limit = {
					JAP = {
						not = { has_country_flag = USA_intervention_strikes }
					}
				}
				JAP = {
					set_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
			else = {
				JAP = {
					modify_country_flag = {
						flag = USA_intervention_strikes
						value = 1
					}
				}
			}
		}
	}

	
}

